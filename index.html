<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ReflexAL Hub</title>
<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:Arial,Helvetica,sans-serif}
body{overflow:hidden;background:#000}
canvas{display:block;margin:auto;border-radius:16px}

#menu{
 position:fixed;inset:0;
 display:flex;flex-direction:column;
 justify-content:center;align-items:center;
 background:linear-gradient(120deg,cyan,lime,magenta,yellow,orange,cyan);
 background-size:600% 600%;
 animation:bg 20s linear infinite;
}
@keyframes bg{0%{background-position:0%}100%{background-position:100%}}

#title{
 font-size:64px;font-weight:900;
 color:white;
 text-shadow:0 0 10px cyan,0 0 25px cyan,0 0 40px cyan;
 margin-bottom:40px;
}

#mainBtns{display:flex;gap:20px;margin-bottom:40px}

.bigBtn{width:220px;height:140px;border-radius:28px;background:#111;border:3px solid cyan;color:white;font-size:24px;font-weight:700;cursor:pointer}
.smallBtn{width:160px;height:110px;border-radius:28px;background:#111;border:3px solid cyan;color:white;font-size:20px;font-weight:700;cursor:pointer}

#roundBtns{display:flex;gap:20px}

.round{
 width:70px;height:70px;border-radius:50%;
 background:#111;border:3px solid cyan;color:white;
 font-size:26px;cursor:pointer
}

.panel{position:fixed;inset:0;background:rgba(0,0,0,.9);display:none;flex-direction:column;justify-content:center;align-items:center;color:white}
.panel h2{font-size:42px;margin-bottom:20px}
.panel button{margin-top:20px;padding:10px 24px;font-size:18px;border-radius:12px;border:none}

#game{display:none;background:#000}

</style>
</head>
<body>

<div id="menu">
  <div id="title">ReflexAL Hub</div>

  <div id="mainBtns">
    <button class="smallBtn" onclick="changeSkill()">Skill</button>
    <button class="bigBtn" onclick="openLevels()">Play</button>
    <button class="smallBtn" onclick="changeKey()">Key</button>
  </div>

  <div id="roundBtns">
    <button class="round" onclick="openSettings()">‚öô</button>
    <button class="round" onclick="openStats()">‚òÖ</button>
    <button class="round" onclick="openHelp()">?</button>
  </div>
</div>

<canvas id="game" width="1280" height="720"></canvas>

<div id="levels" class="panel">
  <h2 id="levelTitle">Easy</h2>
  <p id="levelName">First Try</p>
  <p>D√πng ‚û° ƒë·ªÉ ƒë·ªïi level</p>
  <button onclick="startGame()">Start</button>
  <button onclick="closePanels()">Back</button>
</div>

<div id="settings" class="panel"><h2>Settings</h2><p>Volume</p><input type="range"><button onclick="closePanels()">Back</button></div>
<div id="stats" class="panel"><h2>Stats</h2><p id="statText">Ch∆∞a c√≥ d·ªØ li·ªáu</p><button onclick="closePanels()">Back</button></div>
<div id="help" class="panel"><h2>How to Play</h2><p>L: bay l√™n | A: tƒÉng t·ªëc</p><button onclick="closePanels()">Back</button></div>

<script>
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');

const menu = document.getElementById('menu');
const levelsPanel = document.getElementById('levels');
const settings = document.getElementById('settings');
const stats = document.getElementById('stats');
const help = document.getElementById('help');

let gravity = 0.35;
let speed = 4;

let plane = {
  x: 200,
  y: 360,
  w: 26,
  h: 14,
  vy: 0
};

let spawnY = 360;
let obstacles = [];
let running = false;
let paused = false;
let practice = false;

let controlKey = 'l';
let holding = false;

let startTime = 0;
let levelTime = 60000;

const clickForce = -2.2;
const holdForce  = -4.2;

const levels = [
 ['Easy',['First try','Game over','Never give up'],2],
 ['Hard',['So...',"Don't try it!",'Calm down'],5],
 ['Nightmares',['Crazy','Possible?','Electricity'],10],
 ['Ultra',['Wrong','The timer'],15],
 ['Extreme',['Impossible',"Can't pass it!"],20]
];

let curLevel = 0, curSub = 0;

function openLevels(){levelsPanel.style.display='flex';updateLevelUI();}
function openSettings(){settings.style.display='flex'}
function openStats(){stats.style.display='flex'}
function openHelp(){help.style.display='flex'}
function closePanels(){levelsPanel.style.display=settings.style.display=stats.style.display=help.style.display='none'}

function updateLevelUI(){
 levelTitle.textContent = levels[curLevel][0];
 levelName.textContent  = levels[curLevel][1][curSub];
}

// ================= INPUT =================

canvas.addEventListener("mousedown",()=>{
 plane.vy = clickForce;
 holding = true;
});
canvas.addEventListener("mouseup",()=> holding=false);

document.addEventListener("keydown", e=>{
 if(e.key === "Escape") togglePause();

 if(levelsPanel.style.display==='flex' && e.key==='ArrowRight'){
   curSub++;
   if(curSub >= levels[curLevel][1].length){
     curSub = 0;
     curLevel = (curLevel+1) % levels.length;
   }
   updateLevelUI();
 }

 if(e.key.toLowerCase() === controlKey){
   plane.vy = clickForce;
   holding = true;
 }

 if(e.key.toLowerCase()==='a') speed = 7;
});

document.addEventListener("keyup", e=>{
 if(e.key.toLowerCase() === controlKey) holding = false;
 if(e.key.toLowerCase()==='a') speed = 4;
});

// ================= GAME =================

function startGame(){
 closePanels();
 menu.style.display='none';
 canvas.style.display='block';
 running = true;
 paused = false;
 practice = false;
 obstacles = [];
 plane.y = spawnY;
 plane.vy = 0;
 startTime = Date.now();
 loop();
}

function spawnObs(){
 obstacles.push({
   x: canvas.width + 30,
   y: Math.random()*(canvas.height-60)+30,
   r: 18 + Math.random()*14
 });
}

function rectCircleCollide(rect, circle){
 let cx = Math.max(rect.x, Math.min(circle.x, rect.x+rect.w));
 let cy = Math.max(rect.y, Math.min(circle.y, rect.y+rect.h));
 let dx = circle.x - cx;
 let dy = circle.y - cy;
 return dx*dx + dy*dy <= circle.r*circle.r;
}

function update(){
 if(paused) return;

 if(holding) plane.vy += holdForce * 0.15;

 plane.vy += gravity;
 plane.y += plane.vy;

 if(plane.y < 0){ plane.y = 0; plane.vy = 0; }
 if(plane.y > canvas.height-plane.h){
   plane.y = canvas.height-plane.h;
   plane.vy = 0;
 }

 obstacles.forEach(o=>o.x -= speed);
 obstacles = obstacles.filter(o=>o.x > -60);

 if(Math.random() < 0.02 * levels[curLevel][2] / 5) spawnObs();

 obstacles.forEach(o=>{
   if(rectCircleCollide(plane,o)){
     if(!practice) respawn();
   }
 });

 if(Date.now() - startTime >= levelTime) levelClear();
}

function draw(){
 ctx.clearRect(0,0,canvas.width,canvas.height);

 // progress bar
 let p = (Date.now()-startTime)/levelTime;
 ctx.fillStyle="#333";
 ctx.fillRect(20,20,300,10);
 ctx.fillStyle="lime";
 ctx.fillRect(20,20,300*p,10);

 // plane
 ctx.fillStyle='cyan';
 ctx.fillRect(plane.x,plane.y,plane.w,plane.h);

 // obstacles
 ctx.fillStyle='red';
 obstacles.forEach(o=>{
   ctx.beginPath();
   ctx.arc(o.x,o.y,o.r,0,Math.PI*2);
   ctx.fill();
 });
}

function loop(){
 if(!running) return;
 update();
 draw();
 requestAnimationFrame(loop);
}

// ================= GAME FLOW =================

function respawn(){
 plane.y = spawnY;
 plane.vy = 0;
 obstacles = [];
}

function togglePause(){
 if(!running) return;
 paused = !paused;

 if(paused){
   setTimeout(()=>{
     let c = prompt("‚è∏ PAUSED\n1: Resume\n2: Exit\n3: Practice");
     if(c==="1") paused=false;
     if(c==="2") location.reload();
     if(c==="3"){ practice=true; paused=false; alert("Practice mode ON"); }
   },50);
 }
}

function levelClear(){
 running = false;
 setTimeout(()=>{
   alert("üèÜ LEVEL CLEAR!!!! üèÜ");
   location.reload();
 },50);
}

// ================= MENU =================

function changeSkill(){
 alert("ƒê√£ ƒë·ªïi skill üî•");
}

function changeKey(){
 const k = prompt("Nh·∫≠p ph√≠m ƒëi·ªÅu khi·ªÉn m·ªõi:");
 if(k) controlKey = k.toLowerCase();
}
</script>


</body>
</html>















